<!--pages/memorials/memorials.wxml-->
<view class="container">
  <!-- 页面标题 -->
  <view class="page-header">
    <text class="page-title">我的纪念馆</text>
    <text class="page-subtitle">管理您创建的所有纪念馆</text>
  </view>
  
  <!-- 创建按钮 -->
  <view class="create-section">
    <button class="create-btn" bindtap="goToCreateMemorial">
      <text class="btn-icon">➕</text>
      <text class="btn-text">创建新纪念馆</text>
    </button>
  </view>
  
  <!-- 纪念馆列表 -->
  <view wx:if="{{memorials.length > 0}}" class="memorials-grid">
    <view 
      wx:for="{{memorials}}" 
      wx:key="id" 
      class="memorial-card"
      bindtap="goToMemorialDetail"
      data-id="{{item.id}}"
    >
      <!-- 纪念馆头部 -->
      <view class="memorial-header">
        <view class="memorial-info">
          <text class="memorial-title">{{item.pet_name}}</text>
          <text class="memorial-species">{{item.species}} · {{item.breed}}</text>
        </view>
        <view class="memorial-actions" catchtap="stopPropagation">
          <button 
            class="action-btn btn-edit" 
            bindtap="editMemorial" 
            data-id="{{item.id}}"
          >
            <text class="btn-icon">✏️</text>
          </button>
          <button 
            class="action-btn btn-delete" 
            bindtap="deleteMemorial" 
            data-id="{{item.id}}"
          >
            <text class="btn-icon">🗑️</text>
          </button>
        </view>
      </view>
      
      <!-- 纪念馆照片 -->
      <view wx:if="{{item.photos && item.photos.length > 0}}" class="memorial-photos">
        <image 
          wx:for="{{item.photos}}" 
          wx:for-item="photo" 
          wx:key="*this"
          class="photo-item" 
          src="{{photo}}" 
          mode="aspectFill"
        />
      </view>
      
      <!-- 纪念馆描述 -->
      <view wx:if="{{item.description}}" class="memorial-description">
        <text class="description-text">{{item.description}}</text>
      </view>
      
      <!-- 纪念馆统计 -->
      <view class="memorial-stats">
        <view class="stat-item">
          <text class="stat-icon">📸</text>
          <text class="stat-text">{{item.photo_count || 0}} 张照片</text>
        </view>
        <view class="stat-item">
          <text class="stat-icon">👁️</text>
          <text class="stat-text">{{item.view_count || 0}} 次浏览</text>
        </view>
        <view class="stat-item">
          <text class="stat-icon">❤️</text>
          <text class="stat-text">{{item.like_count || 0}} 个赞</text>
        </view>
      </view>
      
      <!-- 创建时间 -->
      <view class="memorial-meta">
        <text class="meta-text">创建于 {{item.created_at}}</text>
      </view>
    </view>
  </view>
  
  <!-- 空状态 -->
  <view wx:else class="empty-state">
    <text class="empty-icon">🏛️</text>
    <text class="empty-title">还没有纪念馆</text>
    <text class="empty-desc">创建您的第一个纪念馆，记录珍贵的回忆</text>
    <button class="empty-btn" bindtap="goToCreateMemorial">
      立即创建
    </button>
  </view>
  
  <!-- 加载状态 -->
  <view wx:if="{{loading}}" class="loading-state">
    <view class="loading-spinner"></view>
    <text class="loading-text">加载中...</text>
  </view>
</view>