<!--pages/memorials/memorials.wxml-->
<view class="container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <text class="page-title">æˆ‘çš„çºªå¿µé¦†</text>
    <text class="page-subtitle">ç®¡ç†æ‚¨åˆ›å»ºçš„æ‰€æœ‰çºªå¿µé¦†</text>
  </view>
  
  <!-- åˆ›å»ºæŒ‰é’® -->
  <view class="create-section">
    <button class="create-btn" bindtap="goToCreateMemorial">
      <text class="btn-icon">â•</text>
      <text class="btn-text">åˆ›å»ºæ–°çºªå¿µé¦†</text>
    </button>
  </view>
  
  <!-- çºªå¿µé¦†åˆ—è¡¨ -->
  <view wx:if="{{memorials.length > 0}}" class="memorials-grid">
    <view 
      wx:for="{{memorials}}" 
      wx:key="id" 
      class="memorial-card"
      bindtap="goToMemorialDetail"
      data-id="{{item.id}}"
    >
      <!-- çºªå¿µé¦†å¤´éƒ¨ -->
      <view class="memorial-header">
        <view class="memorial-info">
          <text class="memorial-title">{{item.pet_name}}</text>
          <text class="memorial-species">{{item.species}} Â· {{item.breed}}</text>
        </view>
        <view class="memorial-actions" catchtap="stopPropagation">
          <button 
            class="action-btn btn-edit" 
            bindtap="editMemorial" 
            data-id="{{item.id}}"
          >
            <text class="btn-icon">âœï¸</text>
          </button>
          <button 
            class="action-btn btn-delete" 
            bindtap="deleteMemorial" 
            data-id="{{item.id}}"
          >
            <text class="btn-icon">ğŸ—‘ï¸</text>
          </button>
        </view>
      </view>
      
      <!-- çºªå¿µé¦†ç…§ç‰‡ -->
      <view wx:if="{{item.photos && item.photos.length > 0}}" class="memorial-photos">
        <image 
          wx:for="{{item.photos}}" 
          wx:for-item="photo" 
          wx:key="*this"
          class="photo-item" 
          src="{{photo}}" 
          mode="aspectFill"
        />
      </view>
      
      <!-- çºªå¿µé¦†æè¿° -->
      <view wx:if="{{item.description}}" class="memorial-description">
        <text class="description-text">{{item.description}}</text>
      </view>
      
      <!-- çºªå¿µé¦†ç»Ÿè®¡ -->
      <view class="memorial-stats">
        <view class="stat-item">
          <text class="stat-icon">ğŸ“¸</text>
          <text class="stat-text">{{item.photo_count || 0}} å¼ ç…§ç‰‡</text>
        </view>
        <view class="stat-item">
          <text class="stat-icon">ğŸ‘ï¸</text>
          <text class="stat-text">{{item.view_count || 0}} æ¬¡æµè§ˆ</text>
        </view>
        <view class="stat-item">
          <text class="stat-icon">â¤ï¸</text>
          <text class="stat-text">{{item.like_count || 0}} ä¸ªèµ</text>
        </view>
      </view>
      
      <!-- åˆ›å»ºæ—¶é—´ -->
      <view class="memorial-meta">
        <text class="meta-text">åˆ›å»ºäº {{item.created_at}}</text>
      </view>
    </view>
  </view>
  
  <!-- ç©ºçŠ¶æ€ -->
  <view wx:else class="empty-state">
    <text class="empty-icon">ğŸ›ï¸</text>
    <text class="empty-title">è¿˜æ²¡æœ‰çºªå¿µé¦†</text>
    <text class="empty-desc">åˆ›å»ºæ‚¨çš„ç¬¬ä¸€ä¸ªçºªå¿µé¦†ï¼Œè®°å½•çè´µçš„å›å¿†</text>
    <button class="empty-btn" bindtap="goToCreateMemorial">
      ç«‹å³åˆ›å»º
    </button>
  </view>
  
  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading-state">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>
</view>