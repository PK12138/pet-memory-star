<!--pages/network-test/network-test.wxml-->
<view class="container">
  <view class="header">
    <text class="title">ç½‘ç»œè¯Šæ–­</text>
    <text class="subtitle">æ£€æŸ¥ç½‘ç»œè¿æ¥å’ŒæœåŠ¡å™¨çŠ¶æ€</text>
  </view>

  <view class="test-section">
    <button class="test-btn" bindtap="runDiagnostic">
      <text class="btn-icon">ğŸ”</text>
      <text class="btn-text">å¼€å§‹è¯Šæ–­</text>
    </button>
  </view>

  <view wx:if="{{diagnosticResult}}" class="result-section">
    <text class="section-title">è¯Šæ–­ç»“æœ</text>
    
    <view class="result-item">
      <text class="result-label">ç½‘ç»œè¿æ¥ï¼š</text>
      <text class="result-value {{diagnosticResult.connection.connected ? 'success' : 'error'}}">
        {{diagnosticResult.connection.connected ? 'å·²è¿æ¥' : 'æœªè¿æ¥'}}
      </text>
    </view>
    
    <view class="result-item">
      <text class="result-label">ç½‘ç»œç±»å‹ï¼š</text>
      <text class="result-value">{{diagnosticResult.connection.networkType}}</text>
    </view>
    
    <view class="result-item">
      <text class="result-label">APIçŠ¶æ€ï¼š</text>
      <text class="result-value {{diagnosticResult.apiTest.success ? 'success' : 'error'}}">
        {{diagnosticResult.apiTest.success ? 'æ­£å¸¸' : 'å¼‚å¸¸'}}
      </text>
    </view>
    
    <view wx:if="{{diagnosticResult.apiTest.success}}" class="result-item">
      <text class="result-label">å“åº”æ—¶é—´ï¼š</text>
      <text class="result-value">{{diagnosticResult.apiTest.responseTime}}ms</text>
    </view>
    
    <view wx:if="{{!diagnosticResult.apiTest.success}}" class="result-item">
      <text class="result-label">é”™è¯¯ä¿¡æ¯ï¼š</text>
      <text class="result-value error">{{diagnosticResult.apiTest.error}}</text>
    </view>
    
    <view class="result-item">
      <text class="result-label">æœåŠ¡å™¨åœ°å€ï¼š</text>
      <text class="result-value">{{diagnosticResult.baseUrl}}</text>
    </view>
  </view>

  <view wx:if="{{recommendations.length > 0}}" class="recommendations">
    <text class="section-title">ä¿®å¤å»ºè®®</text>
    <view wx:for="{{recommendations}}" wx:key="*this" class="recommendation-item">
      <text class="recommendation-text">â€¢ {{item}}</text>
    </view>
  </view>

  <view class="test-urls">
    <text class="section-title">æµ‹è¯•URL</text>
    <view class="url-item">
      <text class="url-label">å¥åº·æ£€æŸ¥ï¼š</text>
      <text class="url-value">{{baseUrl}}/api/health</text>
    </view>
    <view class="url-item">
      <text class="url-label">æ³¨å†Œæ¥å£ï¼š</text>
      <text class="url-value">{{baseUrl}}/api/auth/register</text>
    </view>
  </view>
</view>
